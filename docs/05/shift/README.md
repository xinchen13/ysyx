# 移位寄存器及桶形移位器
**移位寄存器**: 移位寄存器在时钟的触发沿，根据其控制信号，将存储在其中的数据向某个方向移动一位

**算术移位和逻辑移位寄存器**: 算术移位是指考虑到符号位的移位，算术移位要保证符号位不改变，算术左移同逻辑左移一样，算术右移最左面的空位补符号位. 逻辑移位不管是向左移位还是向右移位都是空缺处补0, 用 Verilog HDL 很容易描述出移位寄存器，如

```verilog
Q <= {Q[0],Q[7:1]}; //循环右移
Q <= {Q[7],Q[7:1]}; //算术右移
```

**桶形移位器**: 传统的移位寄存器一个周期只能移动一位，当要进行多位移位时需要多个时钟周期，效率较低. 桶形移位器采用组合逻辑的方式来实现同时移动多位，在效率上优势极大

## 实验: 利用移位寄存器实现随机数发生器
可以利用8位移位寄存器来实现一个简单的随机数发生器. 经典的 LFSR (线性反馈移位寄存器, Linear-feedback shift register) 可以使用 n 位移位寄存器生成长度为 $2^n-1$ 的二进制循环序列. 这类序列的片段在表观上是随机的，所以被广泛用于通信中的随机序列生成

具体实现时，可以用一个 8 位右移移位寄存器，从左到右的比特以 $x_7x_6x_5x_4x_3x_2x_1x_0$ 表示，每个时钟周期右移一位, $x_0$ 被移出，最左边移入的位按照上一周期的值计算: $x_8 = x_4\ xor\ x_3\ xor\ x_2 \ xor\ x_0$ , 该序列的周期为255 

实现一个8位的周期为255的伪随机序列，以按钮为时钟信号，并请将8位二进制数以十六进制显示在数码管上, 利用 `rst_n` 与 `SW7-0` 来设置初值 `8'h01` 

- 线性反馈移位寄存器 [lfsr](./vsrc/lfsr.v)
- 数码管16进制显示模块 [segment_hex](./vsrc/segment_hex.v)
- 顶层模块 [top.v](./vsrc/top.v): 把 lfsr 移位后的序列高四位和低四位分别输入给数码管译码器，输出 16 进制结果
- 约束 [top.nxdc](./constr/top.nxdc)
- [Makefile](./Makefile)
- C++ wrapper [sim_main.cpp](./csrc/sim_main.cpp)

经过复位后，点击中间的按键刷新序列，产生序列为: 01, 80, 40, 20, 10, 88, c4, e2, 71...